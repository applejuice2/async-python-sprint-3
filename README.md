# Проектное задание третьего спринта

Было реализовано приложение для получения и обработки сообщений от клиента.

## Описание задания

### `Сервер`
-------------
<br />

Сервис обрабатывает поступающие запросы от клиентов.`

Что умеет делать сервер:
1. Подключенный клиент добавляется в «общий» чат, где находятся ранее подключенные клиенты.
2. После подключения новому клиенту доступны последние N cообщений из общего чата (20, по умолчанию).
3. Повторно подключенный клиент имеет возможность просмотреть все ранее непрочитанные сообщения до момента последнего опроса (как из общего чата, так и приватные).
4. По умолчанию сервер стартует на локальном хосте (127.0.0.1) и на 8000 порту (возможность задать любой).

### Список возможных методов для взаимодействия:  
-------------

<br />

**Войти или зарегестрироваться на сервере.**
```
/sign_in <username>
```
*В ответе приходят либо последние 20 сообщений
(если пользователь ещё ни разу не подключался к серверу), либо все непрочитанные пользователем сообщения.*

<br />

**Отправить сообщение в общий чат.**
```
/send_all <message>
``` 
*После отправки все авторизованное пользователи сразу же получают отправленное сообщение.*

<br />

**Отправить приватное сообщение пользователю.**
```
/send <target_username> <message>
```

<br />

**Получить историю сообщений с пользователем.**
```
/get_chat_with <username>
```
*Повторно подключенный клиент имеет возможность просмотреть все ранее непрочитанные
сообщения до момента последнего опроса (как из общего чата, так и приватные).*

<br />

**Получить список активных и неактивных пользователей и список существующих приватных чатов.**
```
/status
```

<br />

**Зарепортить пользователя.**
```
/report <username>
``` 
*По достижению 3 репортов пользователь банится на 4 часа.*

<br />

**Отправить отложенное сообщение.**
```
/send_delayed <target_username> <delay: seconds> <message>
```

<br />

**Отменить отправку отложенного сообщения.**
```
/cancel_delayed <id_of_delayed_message>
```
*Нобходимо указать ID отложенного сообщения, которое пользователь получает при
отправке отложенного сообщения.*

### `Клиент`

Реализован сервис, который умеет подключаться к серверу для обмена сообщениями с другими клиентами.

Что умеет делать клиент:
1. После подключения клиент может отправлять сообщения в «общий» чат.
2. У клиента есть возможность отправки сообщения в приватном чате (1-to-1) любому участнику из общего чата.


### Дополнительно реализованные требования:

- [X] Возможность создавать сообщения с заранее указанным временем отправки; созданные, но не отправленные сообщения можно отменить.
- [X] Возможность пожаловаться на пользователя. При достижении лимита в 3 предупреждения, пользователь становится «забанен» — невозможность отправки сообщений в течение 4 часов (по умолчанию).



## Требования к решению

1. Описана документация по разработанному API.
2. Использованы концепции ООП.
3. Использованы аннотации типов.
4. Стиль кода приведён в соответствие с pep8, flake8, mypy.
6. Результаты действий логированы.


## Рекомендации к решению

1. Можно использовать внешние библиотеки, но не фреймворки (описать в **requirements.txt**).
2. Можно не проектировать БД: информацию хранить в памяти и/или десериализовать/сериализировать в файл (формат на выбор) и восстанавливать при старте сервера.
3. Нет необходимости разрабатывать UI для клиента: можно выводить информацию в консоль или использовать лог-файлы.
4. API может быть, как вызов по команде/флагу для консольного приложения или эндпойнт для http-сервиса.

## В планах:
1. Покрытие написанного кода тестами.
2. Добавление новых возможностей и ролевой модели.
3. Избавление от повторений в коде 
(от проверок if username и так далее, создании необходимых декораторов.)